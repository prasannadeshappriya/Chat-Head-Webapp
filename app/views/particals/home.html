<div class="container" ng-controller="HomeController as homeCtrl">
    <div ng-include="app/directives/avatar/filled.avatar.directive.tmpl.html"></div>
    <md-content>
        <md-tabs md-dynamic-height="" md-border-bottom="">
            <md-tab label="About">
                <md-content class="md-padding">
                    <h1 class="md-display-2">Tab One</h1>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla venenatis ante augue. Phasellus volutpat neque ac dui mattis vulputate. Etiam consequat aliquam cursus. In sodales pretium ultrices. Maecenas lectus est, sollicitudin consectetur felis nec, feugiat ultricies mi.</p>
                </md-content>
            </md-tab>
            <md-tab label="Public Room">
                <md-content class="md-padding">
                    <div layout="row" layout-wrap>
                        <md-content layout="column" flex="80" flex-sm="100">
                            <md-content style="height: 60vh;">
                                <md-list scroll="homeCtrl.messages">
                                    <md-subheader class="md-info">Messages in room {{ homeCtrl.room.name }}</md-subheader>
                                    <message ng-repeat="message in homeCtrl.messages track by message._id" message="message"
                                             author="homeCtrl.allusers[message.authorId]"
                                             ng-class="{ 'repeated-author' : $index>0 && message.authorId == homeCtrl.messages[$index-1].authorId}"></message>
                                </md-list>
                            </md-content>
                            <md-content layout-padding layout="column">
                                <md-input-container class="md-accent">
                                    <label>New Message</label>
                                    <input ng-enter="homeCtrl.createMessage()" ng-model="homeCtrl.newMessage" md-maxlength="350"/>
                                </md-input-container>
                            </md-content>
                        </md-content>
                        <md-content class="side-nav room-users" hide-sm layout="column" flex="18">
                            <md-list layout-fill>
                                <md-subheader class="md-accent">Available users</md-subheader>
                                <md-list-item class="md-2-line contact-item selected" ng-repeat="(index, contact) in roomItemCtrl.users track by contact._id" ng-show="contact.username">
                                    <avatar user="contact"></avatar>
                                    <div class="md-list-item-text compact">
                                        <h3>{{contact | fullname }}</h3>
                                        <p>@{{contact.username}}</p>
                                    </div>
                                    <md-divider></md-divider>
                                </md-list-item>
                            </md-list>
                        </md-content>
                    </div>
                </md-content>
            </md-tab>
        </md-tabs>
    </md-content>

</div>
